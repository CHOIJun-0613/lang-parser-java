# 어플리케이션과 DB 호출관계 분석 계획
_Exported on 9/27/2025 at 15:32:40 GMT+9 from Cursor (1.6.45)_

---

**User**

## 어플리케이션과 DB 호출관계 분석 기능 추가 검토
springboot와 MyBatis기반 어플리케이션 Java 소스를 분석해서 어플리케이션과 DB Table/Column과의 호출관계를 분석하기 위하여 프로그램을 보완할 거야.
현재 코드를 분석한 후 어떤 단계로 진행할지 내게 작업계획을 알려줘
제시한 단계별 작업 내용을 내가 검토해서 진행할거야. 

---

**Cursor**

현재 코드를 분석하여 어플리케이션과 DB 호출관계 분석 기능 추가를 위한 작업계획을 수립하겠습니다. 먼저 현재 프로젝트 구조와 코드를 파악해보겠습니다.


현재 코드를 분석한 결과, SpringBoot와 MyBatis 기반 어플리케이션의 Java 소스를 분석하여 어플리케이션과 DB Table/Column과의 호출관계를 분석하는 기능을 추가하기 위한 작업계획을 제시하겠습니다.


## 어플리케이션과 DB 호출관계 분석 기능 추가 작업계획

현재 코드를 분석한 결과, 이미 상당한 기능이 구현되어 있습니다. 다음과 같은 단계별 작업계획을 제시합니다:

### **현재 구현된 기능 분석**
- ✅ Java 클래스/메서드/필드 파싱
- ✅ SpringBoot 어노테이션 분석 (Bean, Controller, Service, Repository)
- ✅ MyBatis Mapper 분석 (인터페이스 + XML)
- ✅ JPA 엔티티 분석
- ✅ Neo4j 그래프 데이터베이스 저장
- ✅ Sequence Diagram 생성
- ✅ DB 스키마 분석 (Database, Table, Column, Index, Constraint)

### **추가 구현이 필요한 기능**

#### **1단계: MyBatis SQL 매핑 분석 기능 강화** 
- **목표**: SQL문에서 실제 테이블/컬럼명 추출 및 매핑
- **작업내용**:
  - SQL 파서 추가 (SELECT, INSERT, UPDATE, DELETE 구문 분석)
  - 테이블명/컬럼명 추출 로직 구현
  - MyBatis ResultMap과 테이블 컬럼 매핑 분석
  - SQL문과 Java 메서드 간의 관계 강화

#### **2단계: JPA 엔티티와 DB 테이블 매핑 분석 기능 추가**
- **목표**: JPA 엔티티와 실제 DB 테이블 간의 매핑 관계 분석
- **작업내용**:
  - @Entity, @Table, @Column 어노테이션 분석 강화
  - 엔티티 필드와 DB 컬럼 간의 매핑 관계 추출
  - JPA Repository 메서드와 SQL 쿼리 매핑 분석
  - 엔티티 관계(@OneToMany, @ManyToOne 등) 분석

#### **3단계: 어플리케이션-데이터베이스 호출관계 시각화 기능 구현**
- **목표**: Java 코드와 DB 간의 호출 관계를 시각적으로 표현
- **작업내용**:
  - Controller → Service → Repository → SQL → Table/Column 호출 체인 분석
  - CRUD 매트릭스 생성 (클래스별 테이블 접근 현황)
  - 호출 관계 그래프 생성 (Mermaid 다이어그램)
  - 영향도 분석 (테이블 변경 시 영향받는 클래스/메서드)

#### **4단계: CLI에 DB 호출관계 분석 옵션 추가**
- **목표**: 사용자가 쉽게 DB 호출관계를 분석할 수 있는 CLI 명령어 제공
- **작업내용**:
  - `--db-analysis` 옵션 추가
  - `--crud-matrix` 옵션 추가 (CRUD 매트릭스 출력)
  - `--table-impact` 옵션 추가 (테이블 변경 영향도 분석)
  - `--db-call-chain` 옵션 추가 (호출 체인 분석)

#### **5단계: 고급 분석 기능 추가**
- **목표**: 더 정교한 DB 호출관계 분석
- **작업내용**:
  - 동적 SQL 분석 (MyBatis 동적 쿼리)
  - 복잡한 JOIN 쿼리 분석
  - 트랜잭션 경계 분석
  - 성능 영향도 분석 (N+1 문제 등)

#### **6단계: 테스트 및 검증**
- **목표**: 구현된 기능의 정확성 검증
- **작업내용**:
  - 샘플 SpringBoot 프로젝트로 테스트
  - 다양한 MyBatis/JPA 패턴 테스트
  - 성능 테스트 및 최적화

### **예상 결과물**
1. **CRUD 매트릭스**: 각 클래스가 어떤 테이블에 어떤 작업을 하는지 표시
2. **호출 체인 다이어그램**: API → Service → Repository → SQL → Table 흐름 시각화
3. **테이블 영향도 분석**: 특정 테이블 변경 시 영향받는 코드 위치
4. **데이터 흐름 분석**: 데이터가 어플리케이션을 통해 어떻게 흘러가는지 추적

이 계획에 대해 검토해 주시고, 어떤 단계부터 시작하실지 알려주시면 해당 작업을 진행하겠습니다.

